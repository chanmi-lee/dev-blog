---
layout: post
title: "useMemo in React"
excerpt: "#react #hook #useMemo #memoization"
categories: [ê¸€ë˜, React]
share: true
comments: true
---

### useMemoë€?

Reactì—ì„œ ì»´í¬ë„ŒíŠ¸ ëœë”ë§ì€ ë¹ˆë²ˆí•˜ê²Œ ì¼ì–´ë‚˜ëŠ”ë°, ëŒ€í‘œì ì¸ ì‚¬ë¡€ë¡œëŠ” ì»´í¬ë„ŒíŠ¸ ìì‹ ì˜ ìƒíƒœ ë³€ê²½ í˜¹ì€ ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœ ë³€ê²½ì˜ ì˜í–¥ìœ¼ë¡œ í•¨ê»˜ ë¦¬ëœë”ë§ ë˜ëŠ” ê²½ìš° ë“±ì´ ìˆìŠµë‹ˆë‹¤.
ë§Œì•½ ì»´í¬ë„ŒíŠ¸ì˜ ë¦¬ëœë”ë§ì— ë¶ˆí•„ìš”í•˜ê²Œ ì˜¤ëœ ì‹œê°„ì´ ê±¸ë¦°ë‹¤ë©´, ì‚¬ìš©ìëŠ” UIì—ì„œ ì§€ì—°ì´ ë°œìƒí•˜ëŠ” ê²½í—˜ì„ í•˜ê²Œ ë©ë‹ˆë‹¤.
 
ì•Œê³ ë¦¬ì¦˜ ì„±ëŠ¥ ìµœì í™”ì— ìì£¼ ì“°ì´ëŠ” ê°œë… ì¤‘ í•˜ë‚˜ë¡œ, **memoization**ì´ë¼ëŠ” ê°œë…ì´ ìˆìŠµë‹ˆë‹¤.
memoizationì´ë€ ì´ë¦„ ê·¸ëŒ€ë¡œ ë©”ëª¨ë¥¼ í•˜ëŠ” ê²ƒìœ¼ë¡œ, í”„ë¡œê·¸ë˜ë°ì—ì„œ ë°˜ë³µë˜ëŠ” ê²°ê³¼ë¥¼ ë©”ëª¨ë¦¬ì— ì €ì¥í•´ë‘ê³  ë™ì¼í•œ ì—°ì‚°ì´ í•„ìš”í•œ ê²½ìš° ì´ë¥¼ ì¬í™œìš©í•˜ëŠ” ê¸°ë²•ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
ì´ë¥¼ ì ì ˆíˆ í™œìš©í•˜ë©´ ì¤‘ë³µì„ í”¼í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì†ë„ë¥¼ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤ëŠ” ì´ì ì´ ìˆìŠµë‹ˆë‹¤.

`useMemo` í•¨ìˆ˜ëŠ” React v16.8ë¶€í„° ë‚´ì¥ë˜ì–´ ìˆëŠ” Hooksì˜ í•˜ë‚˜ì…ë‹ˆë‹¤.
Hookì´ë€ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì—ì„œ State, LifeCycle, Reference ë“±ì˜ í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ì˜ ê¸°ëŠ¥ì„ êµ¬í˜„í•œ ê°œë…ìœ¼ë¡œ, ì´ë¥¼ í†µí•´ memoization ê¸°ë²•ì„ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ì—ë„ ì‰½ê²Œ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

``` 
const memoizedValue = useMemo(() => computeExpensiveValue(a, b), [a, b]);
```

`useMemo` í•¨ìˆ˜ëŠ” **2ê°œì˜ ì¸ì**ë¥¼ ë°›ìŠµë‹ˆë‹¤.
ì²«ë²ˆì§¸ ì¸ìë¡œëŠ” ê²°ê³¼ê°’ì„ ìƒì„±í•´ë‚´ëŠ” íŒ©í† ë¦¬ í•¨ìˆ˜, ì¦‰ ë¦¬í„´ ì½œë°± í•¨ìˆ˜ë¥¼ ë°›ìŠµë‹ˆë‹¤.
ë‘ë²ˆì§¸ ì¸ìëŠ” ê²°ê³¼ê°’ì„ ì¬í™œìš©í•  ë•Œ ê¸°ì¤€ì´ ë˜ëŠ” ì…ë ¥ê°’ ë°°ì—´ì…ë‹ˆë‹¤.
ë‘ë²ˆì§¸ ì¸ìë¡œ ì „ë‹¬ëœ ê°’ì´ ì´ì „ê³¼ ë‹¤ë¥¸ ê²½ìš°ì—ë§Œ ì²«ë²ˆì§¸ ê°’ì´ ì‹¤í–‰ë˜ë©°, ì´ë¥¼ í†µí•´ í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸ ë‚´ì—ì„œ ê³„ì‚°ë˜ëŠ” ê°’ì— ëŒ€í•œ ìµœì í™”ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

`useMemo`ì— ì „ë‹¬ëœ í•¨ìˆ˜ëŠ” ëœë”ë§ ì¤‘ì— ì‹¤í–‰ë©ë‹ˆë‹¤.
ë•Œë¬¸ì— ëœë”ë§ê³¼ ê´€ë ¨ëœ ë‚´ìš©ë§Œ ì „ë‹¬í•´ì•¼í•˜ë©°, ëœë”ë§ê³¼ ê´€ê³„ ì—†ëŠ” ê²½ìš°ëŠ” `useEffect`ë¥¼ ì‚¬ìš©í•˜ê¸¸ ê¶Œì¥í•©ë‹ˆë‹¤.

> ì „ë‹¬ë˜ëŠ” ì½œë°± í•¨ìˆ˜ì˜ ì´ë¦„ì´ `computeExpensiveValue`ë¼ëŠ”ë°ì„œ ì§ì‘í•  ìˆ˜ ìˆì§€ë§Œ,
`useMemo`ë¥¼ í†µí•´ ì¬í™œìš©ë˜ëŠ” ë¡œì§ì´ ë³µì¡í•œ ê²½ìš° ë¶ˆí•„ìš”í•œ ì—°ì‚°ì„ ë§‰ì„ ìˆ˜ ìˆê³  ì„±ëŠ¥ìƒì˜ ì°¨ì´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

### useMemo ì˜ˆì œ

ê°„ë‹¨í•œ ì˜ˆì œì™€ í•¨ê»˜ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

> without useMemo

```javascript 1.8
function Counter() {
    const [count, setCount] = React.useState(0)
    const doubleCount = count * 2

    return (
        <div>
            <h1>React Hooks: useMemo example</h1>
            <button onClick={() => setCount(count)}>Double Counter: {count}</button>
        </div>
    )
}
```

ë²„íŠ¼ì„ í´ë¦­í•  ë•Œë§ˆë‹¤ ì´ì „ë³´ë‹¤ ë‘ ë°° í° ê°’ì´ ë°˜í™˜ë©ë‹ˆë‹¤.
í•˜ì§€ë§Œ count ê°’ê³¼ ìƒê´€ì—†ì´ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ëœë”ë§ ë˜ì—ˆì„ ë•Œ ë¶ˆí•„ìš”í•˜ê²Œ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ê²Œ ë©ë‹ˆë‹¤.
ê°„ë‹¨í•œ ì‚¬ë¡€ì§€ë§Œ, ì´ë³´ë‹¤ ë” ë³µì¡í•œ ì—°ì‚°ì´ê±°ë‚˜ ì»´í¬ë„ŒíŠ¸ì˜ ìƒíƒœê°’ì´ ë§ì€ ê²½ìš° ê·¸ë§Œí¼ì˜ ë¦¬ì†ŒìŠ¤ê°€ ë‚­ë¹„ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> with useMemo

```javascript 1.8
function Counter() {
    const [count, setCount] = React.useState(0)
    const doubleCount = React.useMemo(() => counter * 2, [count])

    return (
        <div>
            <h1>React Hooks: useMemo example</h1>
            <button onClick={() => setCount(count)}>Double Counter: {count}</button>
        </div>
    )
}
```

`useMemo`ë¥¼ ì‚¬ìš©í•œë‹¤ë©´, ì˜ì¡´í•˜ëŠ” ê°’(count)ì´ ë³€ê²½ë˜ëŠ” ê²½ìš°ë§Œ ì—°ì‚°ë˜ë¯€ë¡œ ë¶ˆí•„ìš”í•œ ì—°ì‚°ì„ ë§‰ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### useMemo, ì–¸ì œ í•„ìš”í• ê¹Œ?

ì¼ë°˜ì ìœ¼ë¡œ memoizationì˜ ê¸°ë²•ì„ í™œìš©í•œ ì»´í¬ë„ŒíŠ¸ ì„±ëŠ¥ ìµœì í™”ëŠ” ì˜ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
Reactì˜ reconciliationê³¼ Virtual DOMì´ ì¶©ë¶„íˆ ë¹ ë¥´ê³ , ëŒ€ë¶€ë¶„ì˜ ì‚¬ìš©ìê°€ ì²´ê°í•  ì •ë„ì˜ ì„±ëŠ¥ ìµœì í™”ê°€ í•„ìš”í•œ ìƒí™©ì´ ê·¸ë¦¬ ìì£¼ ìˆì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
ë˜í•œ ì‹¤í–‰ë˜ëŠ” ëª¨ë“  ì½”ë“œëŠ” ê·¸ë§Œí¼ì˜ ë¹„ìš©ì„ ìš”êµ¬í•˜ê¸° ë•Œë¬¸ì—, ë¬´ë¶„ë³„í•œ í•¨ìˆ˜ í˜¸ì¶œì€ ë¦¬ì†ŒìŠ¤ ë‚­ë¹„ë¡œ ì´ì–´ì ¸ ì„±ëŠ¥ ê°œì„ ì´ ì•„ë‹Œ ì•…í™”ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ë§Œì•½ í”„ë¡ íŠ¸ì—”ë“œ ë‹¨ì—ì„œ ì²˜ë¦¬í•´ì•¼ë§Œ í•˜ëŠ” ë³µì¡í•œ ì—°ì‚°ì´ í•„ìš”í•œ ê²½ìš°ê°€ ìˆë‹¤ê³  í•˜ë”ë¼ë„,
ê°€ì¥ ë¨¼ì € `useMemo`ë‚˜ `useCallback`ì™€ ê°™ì€ ìµœì í™” ê¸°ë²•ì„ ë„ì…í•˜ëŠ” ê²ƒì€ ì¢‹ì§€ ì•ŠìŠµë‹ˆë‹¤.
ëŒ€ì‹ , `useEffect` í•¨ìˆ˜ ë“±ì„ ì´ìš©í•´ ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬í•˜ëŠ” ë°©ì•ˆì„ ë¨¼ì € ê³ ë ¤í•˜ê±°ë‚˜ í´ë˜ìŠ¤ ê¸°ë°˜ì˜ ì»´í¬ë„ŒíŠ¸ì¸ ê²½ìš° `shouldComponentUpdate`ë¥¼ ì‚¬ìš©í•´ë³´ëŠ”ê±´ ì–´ë–¨ê¹Œìš”?

---

ğŸ”— ì°¸ì¡°

ğŸ“Œ [Hook API reference - useMemo :: React Official Docs](https://reactjs.org/docs/hooks-reference.html#usememo)
ğŸ“Œ [React - Reconciliation :: React Official Docs](https://reactjs.org/docs/reconciliation.html)
